import{w as r,r as h}from"./index-f76e1fc4.js";import{J as s}from"./index-1b64e03c.js";function E(){return!!(localStorage.getItem(c)&&localStorage.getItem(d))}const i=r({ordered_breaks:[]});i.subscribe(e=>{console.log(e)});const c="USERNAME",d="PASSWORD",g=localStorage.getItem(c)||"",m=localStorage.getItem(d)||"",S=r(g),p=r(m),a=h("http://127.0.0.1:3000");S.subscribe(e=>{localStorage.setItem(c,e)});p.subscribe(e=>{localStorage.setItem(d,e)});async function A(){if(s(n)===o.Success)return;let e=u(),t=await fetch(`${s(a)}/login`,{headers:{Authorization:e}});console.log("resp.status",t.status),t.status===200?n.set(o.Success):n.set(o.Error)}function u(){return window.btoa(`${s(S)}:${s(p)}`)}async function _(e){return await fetch(`${s(a)}/order_completed/${e}`,{headers:{Authorization:u()},method:"POST"}).then(()=>{})}async function $(e,t){return await fetch(`${s(a)}/update_order/${e}`,{headers:{Authorization:u(),"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then(()=>{})}async function y(){const e=new EventSource(`${s(a)}/sse`);e.onmessage=t=>{console.log(t);const l=JSON.parse(t.data);l.BreaksUpdated&&i.set(l.BreaksUpdated)},f.set(e)}const f=r(),n=r(void 0);var o=(e=>(e[e.Success=0]="Success",e[e.Error=1]="Error",e))(o||{});export{o as L,A as a,i as b,E as c,$ as d,n as l,_ as o,p,y as r,S as u};
